<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Roy Blogdown</title>
    <link>/post/</link>
    <description>Recent content in Posts on Roy Blogdown</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 01 Oct 2020 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Energy sector</title>
      <link>/2020/10/01/energyhhi/</link>
      <pubDate>Thu, 01 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/10/01/energyhhi/</guid>
      <description>UK energy market competitivenessHerfindahl-Hirschman IndexRegulators use the HHI Index using the 50 largest companies in a particular industry to determine if that industry should be considered competitive or as close to being a monopoly.
A market with an HHI of less than 1,500 is considered to be a competitive marketplace, an HHI of 1,500 to 2,500 to be a moderately concentrated marketplace, and an HHI of 2,500 or greater to be a highly concentrated marketplace.</description>
    </item>
    
    <item>
      <title>Interlayer</title>
      <link>/2020/10/01/interlayer/</link>
      <pubDate>Thu, 01 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/10/01/interlayer/</guid>
      <description>library(tidyverse)library(gganimate)library(readxl)interlayer_ &amp;lt;- read_excel(file.path(&amp;quot;data&amp;quot;,&amp;quot;interlayer.xlsx&amp;quot;))interlayer &amp;lt;- interlayer_ %&amp;gt;% pivot_longer(cols = c(colnames(interlayer_)[2],colnames(interlayer_)[9:15]),names_to = c(&amp;quot;composition&amp;quot;),values_to=c(&amp;quot;CTE&amp;quot;))new &amp;lt;- interlayer %&amp;gt;% filter(composition %in% c(&amp;quot;Zr&amp;quot;,&amp;quot;Cr&amp;quot;)) %&amp;gt;%rename(&amp;quot;comp&amp;quot;=&amp;quot;composition&amp;quot;)p &amp;lt;- interlayer %&amp;gt;% filter(!composition %in% c(&amp;quot;Zr&amp;quot;,&amp;quot;Cr&amp;quot;)) %&amp;gt;% ggplot(aes(Temp,CTE,colour = composition))+geom_text(aes(label = ifelse(Temp == 1600,composition,&amp;quot;&amp;quot;)),hjust = 0, nudge_y = 0.2,nudge_x = 20)+geom_text(data = new,aes(colour = comp,label = ifelse(Temp == 1600,comp,&amp;quot;&amp;quot;)),hjust = 0, nudge_y = 0.2,nudge_x = 20)+theme_minimal()+labs(title=&amp;quot;HEA CTE&amp;quot;,x=&amp;quot;Temperature (K)&amp;quot;,y=expression(paste(alpha, &amp;quot; ppm &amp;quot;, &amp;quot;(&amp;quot;,K^-1,&amp;quot;)&amp;quot;)))+geom_line(size = 2)+geom_line(size = 2,data = new,aes(Temp, CTE, colour = comp))+theme(legend.</description>
    </item>
    
    <item>
      <title>Oscillations</title>
      <link>/2020/08/04/oscillations/</link>
      <pubDate>Tue, 04 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/08/04/oscillations/</guid>
      <description>library(readxl)library(tidyverse)oscillations_raw &amp;lt;- read_excel(&amp;quot;oscillations.xlsx&amp;quot;, sheet = 3)osc &amp;lt;- oscillations_rawosc %&amp;gt;% pivot_longer(cols =colnames(osc)[2:5], names_to = &amp;quot;variable&amp;quot;, values_to = &amp;quot;value&amp;quot;) %&amp;gt;% mutate(group = case_when(str_detect(variable,&amp;quot;PMASS1500&amp;quot;) ~ &amp;quot;PMASS1500&amp;quot;,TRUE ~ &amp;quot;PMASS500&amp;quot;)) %&amp;gt;% ggplot(aes(step, value, colour = variable))+labs(colour = &amp;quot;&amp;quot;)+facet_grid(~ group) +theme(legend.position = &amp;quot;bottom&amp;quot;)+geom_line()</description>
    </item>
    
    <item>
      <title>Coronavirus</title>
      <link>/2020/07/17/coronavirus/</link>
      <pubDate>Fri, 17 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/17/coronavirus/</guid>
      <description>https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide
Libraries, reading in of the data and light tidying.
library(tidyverse)library(lubridate)library(httr)library(zoo)library(plotly)library(dplyr)library(ggrepel)library(gganimate)library(gifski)library(transformr)library(tidyr)library(ggthemes)theme_set(theme_minimal())covid_raw &amp;lt;- read.csv(&amp;quot;https://opendata.ecdc.europa.eu/covid19/casedistribution/csv&amp;quot;, na.strings = &amp;quot;&amp;quot;, fileEncoding = &amp;quot;UTF-8-BOM&amp;quot;) %&amp;gt;% rename(&amp;quot;date&amp;quot; = dateRep,&amp;quot;country&amp;quot; = countriesAndTerritories,&amp;quot;code&amp;quot; = countryterritoryCode,&amp;quot;population2019&amp;quot; = popData2019,&amp;quot;continent&amp;quot; = continentExp,&amp;quot;cases_rate&amp;quot; = Cumulative_number_for_14_days_of_COVID.19_cases_per_100000)Defining of the G8 and G20 nations
#covid_data &amp;lt;- read.csv(&amp;quot;covid_data.csv&amp;quot;)G8 &amp;lt;- c(&amp;quot;FRA&amp;quot;,&amp;quot;DEU&amp;quot;,&amp;quot;ITA&amp;quot;,&amp;quot;JPN&amp;quot;,&amp;quot;GBR&amp;quot;,&amp;quot;USA&amp;quot;,&amp;quot;RUS&amp;quot;,&amp;quot;CAN&amp;quot;)G20 &amp;lt;- c(&amp;quot;ARG&amp;quot;,&amp;quot;BRA&amp;quot;,&amp;quot;AUS&amp;quot;,&amp;quot;CAN&amp;quot;,&amp;quot;CHN&amp;quot;,&amp;quot;FRA&amp;quot;,&amp;quot;DEU&amp;quot;,&amp;quot;IND&amp;quot;,&amp;quot;IDN&amp;quot;,&amp;quot;ITA&amp;quot;,&amp;quot;JPN&amp;quot;,&amp;quot;KOR&amp;quot;,&amp;quot;MEX&amp;quot;,&amp;quot;RUS&amp;quot;,&amp;quot;SAU&amp;quot;,&amp;quot;ZAF&amp;quot;,&amp;quot;TUR&amp;quot;,&amp;quot;GBR&amp;quot;,&amp;quot;USA&amp;quot;)graph_colours &amp;lt;- c(&amp;quot;cases_rate&amp;quot; = &amp;quot;orange&amp;quot;,&amp;quot;deaths&amp;quot; = &amp;quot;red&amp;quot;, &amp;quot;Lockdown&amp;quot; = &amp;quot;dodgerblue&amp;quot;, &amp;quot;Restrictions lifted&amp;quot; = &amp;quot;green&amp;quot;)Getting the data ready for use.</description>
    </item>
    
    <item>
      <title>Climate change data</title>
      <link>/2020/07/16/climate-change-data/</link>
      <pubDate>Thu, 16 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/16/climate-change-data/</guid>
      <description>Climate change datadata sourced from the World Bank using WDI R package api.
#library(Quandl)#library(wbstats)#library(rWBclimate)#library(WDI)#library(tidyverse)#WDIsearch(&amp;quot;gdp&amp;quot;)#&amp;quot;EN.ATM.GHGT.KT.CE&amp;quot;#dat = WDI(indicator=&amp;quot;EN.ATM.GHGT.KT.CE&amp;quot;, #country=c(&amp;#39;CN&amp;#39;,&amp;#39;US&amp;#39;,&amp;#39;IN&amp;#39;,&amp;#39;RU&amp;#39;,&amp;#39;JP&amp;#39;,&amp;#39;GB&amp;#39;,&amp;#39;FR&amp;#39;,&amp;#39;DE&amp;#39;), start=1970)#gdp &amp;lt;- WDI(indicator = c(&amp;quot;gdp_per_capita&amp;quot; = &amp;quot;NY.GDP.PCAP.KD&amp;quot;,# &amp;quot;population&amp;quot; = &amp;quot;SP.POP.TOTL&amp;quot;))#dat %&amp;gt;% # ggplot(aes(year, EN.ATM.GHGT.KT.CE, color = country))+# geom_line()+# scale_y_log10(labels=scales::number_format())+# theme_void()+# theme(axis.text.x = element_text(),axis.text.y = element_text(),legend.position = #&amp;quot;bottom&amp;quot;)#data &amp;lt;- dat %&amp;gt;% # group_by(year) %&amp;gt;% # summarise(total_emissions = sum(EN.</description>
    </item>
    
    <item>
      <title>Time-series and yfinance api</title>
      <link>/2020/07/07/time-series-and-yfinance-api/</link>
      <pubDate>Tue, 07 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/07/time-series-and-yfinance-api/</guid>
      <description>Python integration using the reticulate package.
yFinance api from https://pypi.org/project/yfinance/
library(reticulate)library(tidyverse)library(bbplot)library(lubridate)library(broom)library(plotly)library(readxl)use_miniconda()import yfinance as yfimport requestsdef yfinance01(ticker,period):g = yf.Ticker(ticker)data=g.history(period=period)return datafixcol01 &amp;lt;- function(g){g &amp;lt;- cbind(date = rownames(g), g)rownames(g) &amp;lt;- 1:nrow(g)return(g)}retrieve01 &amp;lt;- function(ticker,period=&amp;quot;max&amp;quot;){g &amp;lt;- py$yfinance01(ticker,period)g &amp;lt;- fixcol01(g)g &amp;lt;- g %&amp;gt;% select(date, Close)%&amp;gt;% mutate(date=as_date(ymd(date)))colnames(g) &amp;lt;- c(&amp;quot;date&amp;quot;, ticker)return(g)}plotting01 &amp;lt;- function(ticker, period=&amp;quot;max&amp;quot;){g &amp;lt;- retrieve01(ticker, period)plot &amp;lt;- g %&amp;gt;% ggplot(aes(date, get(ticker), group=1))+geom_point(shape=&amp;quot;.</description>
    </item>
    
    <item>
      <title>Metallurgical data</title>
      <link>/2020/07/03/compositional-analysis/</link>
      <pubDate>Fri, 03 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/03/compositional-analysis/</guid>
      <description>divide01 &amp;lt;- function(x){return(x/100)}data &amp;lt;- read.csv(&amp;quot;hardness.csv&amp;quot;) %&amp;gt;% mutate(Al=divide01(Al),Co=divide01(Co),Cr=divide01(Cr),Cu=divide01(Cu),Fe=divide01(Fe),Ni=divide01(Ni))data_ordered &amp;lt;- read.csv(&amp;quot;hardness.csv&amp;quot;) %&amp;gt;% mutate(Al=divide01(Al),Co=divide01(Co),Cr=divide01(Cr),Cu=divide01(Cu),Fe=divide01(Fe),Ni=divide01(Ni)) %&amp;gt;% arrange(desc(hardness))closed &amp;lt;- clo(data, parts = 1:6,total=100)cx &amp;lt;- acomp(data, c(&amp;quot;Al&amp;quot;,&amp;quot;Co&amp;quot;,&amp;quot;Cr&amp;quot;))plot(cx)xc &amp;lt;- acomp(data, c(&amp;quot;Al&amp;quot;,&amp;quot;Co&amp;quot;,&amp;quot;Cr&amp;quot;,&amp;quot;Cu&amp;quot;,&amp;quot;Fe&amp;quot;,&amp;quot;Ni&amp;quot;))xc_ordered &amp;lt;- acomp(data_ordered, c(&amp;quot;Al&amp;quot;,&amp;quot;Co&amp;quot;,&amp;quot;Cr&amp;quot;,&amp;quot;Cu&amp;quot;,&amp;quot;Fe&amp;quot;,&amp;quot;Ni&amp;quot;))plot(xc)barplot.acomp(xc)Order of hardness desc
barplot.acomp(xc_ordered)Possibly drop copper and nickel
library(httr)raw_dd &amp;lt;- read.table(text=content(GET(&amp;quot;https://gist.githubusercontent.com/MrFlick/c1183c911bc5398105d4/raw/715868fba2d0d17a61a8081de17c468bbc525ab1/elements.txt&amp;quot;)), sep=&amp;quot;,&amp;quot;, header=TRUE) %&amp;gt;%mutate(ElementName=ifelse(ElementName==&amp;quot;Sulfer&amp;quot;,&amp;quot;Sulfur&amp;quot;,ElementName),ElementName=ifelse(ElementName==&amp;quot;Phosphorous&amp;quot;,&amp;quot;Phosphorus&amp;quot;,ElementName),ElementName=ifelse(ElementName==&amp;quot;Flourine&amp;quot;,&amp;quot;Fluorine&amp;quot;,ElementName))data &amp;lt;- read_xlsx(&amp;quot;melting_points.</description>
    </item>
    
    <item>
      <title>ASDA</title>
      <link>/2020/07/02/bank-transactions-and-asda/</link>
      <pubDate>Thu, 02 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/02/bank-transactions-and-asda/</guid>
      <description>This is an example article using the BBC News ggplot style package. Data is sourced from bank statements.
year2020 &amp;lt;- read_csv(&amp;quot;2019-2020.csv&amp;quot;)year2019 &amp;lt;- read_csv(&amp;quot;2018-2019.csv&amp;quot;)year2018 &amp;lt;- read_csv(&amp;quot;2017-2018.csv&amp;quot;)year2017 &amp;lt;- read_csv(&amp;quot;2016-2017.csv&amp;quot;)year2016 &amp;lt;- read_csv(&amp;quot;2015-2016.csv&amp;quot;)data &amp;lt;- year2020 %&amp;gt;% union_all(year2019) %&amp;gt;% union_all(year2018) %&amp;gt;% union_all(year2017) %&amp;gt;% union_all(year2016)colnames(data) &amp;lt;- c(&amp;quot;date&amp;quot;,&amp;quot;type&amp;quot;,&amp;quot;code&amp;quot;,&amp;quot;number&amp;quot;,&amp;quot;description&amp;quot;,&amp;quot;dr&amp;quot;,&amp;quot;cr&amp;quot;,&amp;quot;balance&amp;quot;)data &amp;lt;- data %&amp;gt;%mutate(date = dmy(date),year_month = as.numeric(paste(year(date), month(date), sep = &amp;quot;&amp;quot;))) %&amp;gt;% arrange(date)data_asda_wages &amp;lt;- data %&amp;gt;% filter(!cr==is.na(cr),description==&amp;quot;ASDA STORES PLC&amp;quot;) %&amp;gt;% mutate(cumsum_asda_wage=cumsum(cr))data_asda_costs &amp;lt;- data %&amp;gt;% filter(!</description>
    </item>
    
    <item>
      <title>Election2019</title>
      <link>/2020/07/01/bbc-style-ggplot/</link>
      <pubDate>Wed, 01 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/01/bbc-style-ggplot/</guid>
      <description>library(tidyverse)#setwd(&amp;quot;~/University/R/election2019&amp;quot;)library(readr)election &amp;lt;- read_csv(&amp;quot;HoC-2019GE-results-by-constituency.csv&amp;quot;) %&amp;gt;% mutate(con_p=con/valid_votes,lab_p=lab/valid_votes,brexit_p=brexit/valid_votes,ld_p=ld/valid_votes,snp_p=snp/valid_votes)Voting mix of the most populated constituenciesparty_colours &amp;lt;- c(&amp;quot;purple&amp;quot;, &amp;quot;dodgerblue&amp;quot;, &amp;quot;red&amp;quot;,&amp;quot;orange&amp;quot;,&amp;quot;yellow&amp;quot;)election %&amp;gt;% arrange(desc(valid_votes)) %&amp;gt;% mutate(constituency_name=fct_reorder(constituency_name,con_p)) %&amp;gt;% head(30) %&amp;gt;% gather(key=&amp;quot;Party&amp;quot;, value=&amp;quot;Number&amp;quot;, con, lab, ld, snp, brexit) %&amp;gt;% ggplot(aes(constituency_name,Number,fill=Party))+geom_col()+scale_fill_manual(values=party_colours)+coord_flip()+bbc_style()Voting mix of the least populated constituencieselection %&amp;gt;% arrange(valid_votes) %&amp;gt;% mutate(constituency_name=fct_reorder(constituency_name,valid_votes)) %&amp;gt;% head(30) %&amp;gt;% gather(key=&amp;quot;Party&amp;quot;, value=&amp;quot;Number&amp;quot;, con, lab, ld, snp, brexit) %&amp;gt;% ggplot(aes(constituency_name,Number,fill=Party))+geom_col()+scale_fill_manual(values=party_colours)+coord_flip()+bbc_style()Where are the Conservative strongholds?</description>
    </item>
    
    <item>
      <title>Recent grads</title>
      <link>/2020/07/01/recent-grads/</link>
      <pubDate>Wed, 01 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>/2020/07/01/recent-grads/</guid>
      <description>Exploatory data analysismajors_processed %&amp;gt;%count(Major_category, sort = T)## # A tibble: 16 x 2## Major_category n## &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;## 1 Engineering 29## 2 Education 16## 3 Humanities &amp;amp; Liberal Arts 15## 4 Biology &amp;amp; Life Science 14## 5 Business 13## 6 Health 12## 7 Computers &amp;amp; Mathematics 11## 8 Agriculture &amp;amp; Natural Resources 10## 9 Physical Sciences 10## 10 Psychology &amp;amp; Social Work 9## 11 Social Science 9## 12 Arts 8## 13 Industrial Arts &amp;amp; Consumer Services 7## 14 Law &amp;amp; Public Policy 5## 15 Communications &amp;amp; Journalism 4## 16 Interdisciplinary 1by_major_category &amp;lt;- majors_processed %&amp;gt;% filter(!</description>
    </item>
    
  </channel>
</rss>